<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Kelimelerim Modern</title>
  <link rel="manifest" href="manifest.json">
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css?family=Inter:400,600&display=swap" rel="stylesheet">
  <script>
    if(localStorage.theme === 'dark') document.documentElement.classList.add('dark');
  </script>
</head>
<body class="bg-gradient-to-br from-blue-100 via-purple-100 to-pink-100 dark:bg-gradient-to-br dark:from-gray-900 dark:via-gray-800 dark:to-gray-900 text-gray-900 dark:text-gray-100 font-inter min-h-screen flex flex-col">
  <!-- Hero Header -->
  <div class="relative overflow-hidden">
    <div class="w-full py-10 bg-gradient-to-r from-blue-400 via-purple-500 to-pink-500 text-white rounded-b-3xl mb-4 shadow-xl flex flex-col items-center">
      <div class="flex items-center gap-4 mb-2">
        <button onclick="showSection('profil')" class="relative group">
          <img id="profileImage" src="https://randomuser.me/api/portraits/men/32.jpg" alt="Profil" class="w-14 h-14 rounded-full border-4 border-white shadow transition hover:scale-105">
          <span class="absolute -bottom-1 -right-1 bg-green-400 border-2 border-white rounded-full w-4 h-4 flex items-center justify-center text-xs">ğŸ–‰</span>
        </button>
        <div>
          <h1 class="text-3xl font-bold">Kelimelerim</h1>
          <p class="text-lg opacity-90">Her gÃ¼n yeni kelimeler Ã¶ÄŸren!</p>
        </div>
      </div>
      <div class="w-full max-w-md mt-4">
        <div class="flex justify-between text-sm mb-1">
          <span class="font-semibold">GÃ¼nlÃ¼k Hedef</span>
          <span id="progressText">0/10</span>
        </div>
        <div class="w-full bg-white/40 h-3 rounded-full">
          <div id="progressBar" class="h-3 rounded-full bg-green-400 transition-all" style="width:0%"></div>
        </div>
      </div>
    </div>
    <svg class="absolute top-0 left-0 w-full h-24 opacity-30 pointer-events-none" viewBox="0 0 900 200"><path fill="#a78bfa" d="M0,64L60,80C120,96,240,128,360,133.3C480,139,600,117,720,112C840,107,960,117,1080,112C1200,107,1320,85,1380,74.7L1440,64L1440,320L1380,320C1320,320,1200,320,1080,320C960,320,840,320,720,320C600,320,480,320,360,320C240,320,120,320,60,320L0,320Z"></path></svg>
  </div>

  <nav class="flex items-center justify-between px-6 py-4 bg-white/80 dark:bg-gray-900/80 shadow-md relative z-10 rounded-b-xl">
    <div class="flex items-center gap-2 text-2xl font-bold text-blue-700 dark:text-purple-300"><span>ğŸ“š</span>Kelimelerim</div>
    <div class="flex items-center gap-3">
      <button onclick="toggleDarkMode()" class="p-2 rounded-full hover:bg-blue-300/30 dark:hover:bg-purple-300/20 transition" title="Tema">
        <span id="themeIcon">ğŸŒ™</span>
      </button>
      <button onclick="showSection('profil')" class="p-2 rounded-full hover:bg-green-200/30 dark:hover:bg-green-300/10 transition" title="Profil"><span>ğŸ‘¤</span></button>
      <button onclick="showSection('quiz')" class="p-2 rounded-full hover:bg-blue-300/30 dark:hover:bg-purple-300/20 transition" title="Quiz"><span>ğŸ“</span></button>
      <button onclick="showSection('audioQuiz')" class="p-2 rounded-full hover:bg-blue-300/30 dark:hover:bg-purple-300/20 transition" title="Sesli Quiz"><span>ğŸ”‰</span></button>
      <button onclick="showSection('flashcard')" class="p-2 rounded-full hover:bg-green-100 dark:hover:bg-green-800 transition" title="Flashcard"><span>ğŸƒ</span></button>
      <button onclick="showSection('kelimeListesi')" class="p-2 rounded-full hover:bg-blue-300/30 dark:hover:bg-purple-300/20 transition" title="Liste"><span>ğŸ“–</span></button>
      <button onclick="showSection('kelimeEkle')" class="p-2 rounded-full hover:bg-blue-300/30 dark:hover:bg-purple-300/20 transition" title="Ekle"><span>â•</span></button>
      <button onclick="showSection('ayarlar')" class="p-2 rounded-full hover:bg-blue-300/30 dark:hover:bg-purple-300/20 transition" title="Ayarlar"><span>âš™ï¸</span></button>
    </div>
  </nav>

  <main class="flex-1 w-full max-w-2xl mx-auto px-2 py-6">
    <div id="toast" class="fixed right-4 bottom-4 bg-green-500 text-white px-4 py-3 rounded shadow-lg opacity-0 pointer-events-none transition z-50"></div>
    <div id="error" class="hidden mb-4 px-4 py-3 rounded bg-red-200 text-red-800 dark:bg-red-900 dark:text-red-200"></div>

    <!-- Profil -->
    <section id="profil" class="card mb-6 hidden animate-in">
      <h2 class="text-xl font-semibold mb-3 flex items-center gap-2">Profil</h2>
      <div class="flex flex-col sm:flex-row gap-6 items-center">
        <div class="flex flex-col items-center gap-2">
          <label for="profileImageInput" class="cursor-pointer">
            <img id="profileImagePreview" src="https://randomuser.me/api/portraits/men/32.jpg" alt="Profil" class="w-20 h-20 rounded-full border-4 border-blue-400 shadow-lg object-cover">
            <input id="profileImageInput" type="file" accept="image/*" class="hidden" onchange="updateProfileImage(event)">
          </label>
          <span class="text-xs text-gray-500">FotoÄŸrafÄ± deÄŸiÅŸtir</span>
        </div>
        <div class="flex-1 flex flex-col gap-3 w-full">
          <label>
            <span class="block text-sm font-medium">AdÄ±nÄ±z</span>
            <input id="profileName" class="input w-full" placeholder="AdÄ±nÄ±zÄ± girin">
          </label>
          <label>
            <span class="block text-sm font-medium">KÄ±sa Biyografi</span>
            <textarea id="profileBio" class="input w-full" rows="2" placeholder="KÄ±sa bir biyografi..."></textarea>
          </label>
          <button class="btn btn-primary w-full mt-2" onclick="saveProfile()">Profili Kaydet</button>
        </div>
      </div>
      <div class="mt-6 grid grid-cols-2 gap-4 text-center">
        <div class="bg-blue-100 rounded-lg p-3 dark:bg-blue-900/30">
          <div class="text-2xl font-bold" id="profileStatKelime">0</div>
          <div class="text-xs text-gray-600 dark:text-gray-400">Toplam Kelime</div>
        </div>
        <div class="bg-purple-100 rounded-lg p-3 dark:bg-purple-900/30">
          <div class="text-2xl font-bold" id="profileStatOgrenildi">0</div>
          <div class="text-xs text-gray-600 dark:text-gray-400">Ã–ÄŸrenilen Kelime</div>
        </div>
      </div>
    </section>

    <!-- Kelime Ekle -->
    <section id="kelimeEkle" class="card mb-6 animate-in">
      <h2 class="text-xl font-semibold mb-3">Kelime Ekle</h2>
      <div class="flex flex-col sm:flex-row gap-3 mb-3">
        <input id="wordInput" class="input" placeholder="Kelime">
        <input id="intervalInput" class="input" type="number" placeholder="SÃ¼re (sn)">
        <button class="btn btn-primary" onclick="addWord()">Ekle</button>
      </div>
      <div class="flex flex-col sm:flex-row gap-3">
        <input type="file" id="fileInput" class="input-file">
        <button class="btn" onclick="uploadFile()">Dosya YÃ¼kle</button>
      </div>
    </section>
    <!-- Kelime Listesi -->
    <section id="kelimeListesi" class="card mb-6 hidden animate-in">
      <h2 class="text-xl font-semibold mb-3 flex items-center gap-2">
        Kelime Listesi
        <span class="inline-block bg-purple-200 text-purple-800 text-xs px-2 py-1 rounded-full font-semibold ml-2" id="listBadge">0</span>
      </h2>
      <input class="input mb-3" id="wordSearch" placeholder="Kelime veya anlam ara..." oninput="filterWords()">
      <ul id="wordList" class="space-y-2"></ul>
      <div class="flex flex-wrap gap-2 mt-4">
        <button class="btn btn-danger" onclick="clearAllWords()">TÃ¼mÃ¼nÃ¼ Sil</button>
        <button class="btn btn-outline" onclick="exportWordsAsJSON()">DÄ±ÅŸa Aktar (JSON)</button>
      </div>
    </section>
    <!-- Ayarlar -->
    <section id="ayarlar" class="card mb-6 hidden animate-in">
      <h2 class="text-xl font-semibold mb-3">Ayarlar</h2>
      <label class="block mb-3">
        <span>Bildirilecek kelime sayÄ±sÄ±:</span>
        <input id="notificationWordCount" type="number" min="1" class="input mt-1 w-32">
      </label>
      <label class="block mb-3">
        <span>Bildirilecek saatler:</span>
        <input id="notificationTimes" type="text" class="input mt-1 w-52" placeholder="Ã¶rn: 09:00,14:00,21:00">
        <small class="text-xs text-gray-500">Birden fazla saat iÃ§in virgÃ¼l ile ayÄ±rÄ±n</small>
      </label>
      <label class="block mb-3">
        <span>Periyodik bildirim aralÄ±ÄŸÄ± (dakika):</span>
        <input id="notificationInterval" type="number" min="1" class="input mt-1 w-32" value="60">
        <small class="text-xs text-gray-500">0 yaparsanÄ±z aralÄ±k bildirimleri kapalÄ± olur.</small>
      </label>
      <div class="flex flex-wrap gap-2">
        <button class="btn btn-primary" onclick="updateNotifications()">Bildirimleri BaÅŸlat</button>
        <button class="btn btn-outline" onclick="stopAllNotifications()">Bildirimleri Durdur</button>
      </div>
    </section>
    <!-- Quiz -->
    <section id="quiz" class="card hidden animate-in">
      <h2 class="text-xl font-semibold mb-3">Quiz / Test Modu</h2>
      <button class="btn btn-success" onclick="startQuiz()">Quiz BaÅŸlat</button>
      <div id="quizStats" class="mt-4"></div>
    </section>
    <!-- Audio Quiz -->
    <section id="audioQuiz" class="card hidden animate-in">
      <h2 class="text-xl font-semibold mb-3">Sesli Quiz (Dinle ve Yaz)</h2>
      <button class="btn btn-accent" onclick="startAudioQuiz()">Sesli Quiz BaÅŸlat</button>
    </section>
    <!-- Flashcard Modu -->
    <section id="flashcard" class="card mb-6 hidden">
      <h2 class="text-xl font-semibold mb-3 flex items-center gap-2">
        Flashcard Modu <span class="inline-block bg-green-200 text-green-800 text-xs px-2 py-1 rounded-full font-semibold ml-2" id="flashcardBadge">0</span>
      </h2>
      <div id="flashcardBox" class="flex flex-col items-center justify-center min-h-[220px]"></div>
      <div class="flex gap-2 mt-4 justify-center">
        <button class="btn btn-outline" onclick="prevFlashcard()">Ã–nceki</button>
        <button class="btn btn-outline" onclick="nextFlashcard()">Sonraki</button>
        <button class="btn btn-accent" onclick="toggleFlashcard()">Ã‡evir</button>
        <button class="btn btn-primary" onclick="markLearned()">Ã–ÄŸrenildi</button>
        <button class="btn btn-outline" onclick="addFlashcardNote()">Not Ekle</button>
        <button class="btn btn-outline" onclick="speakFlashcard()">ğŸ”Š</button>
      </div>
    </section>
    <!-- Quiz Modal -->
    <div id="quizModal" class="fixed inset-0 bg-black/40 flex items-center justify-center z-50 hidden">
      <div class="bg-white dark:bg-gray-900 p-8 rounded-xl shadow-xl w-full max-w-md animate-in">
        <h3 class="text-xl font-bold mb-4" id="quizQuestion"></h3>
        <input id="quizAnswer" class="input w-full mb-3" placeholder="CevabÄ±nÄ±zÄ± yazÄ±n..." autocomplete="off">
        <div class="flex gap-2">
          <button class="btn btn-primary flex-1" onclick="submitQuizAnswer()">Cevapla</button>
          <button class="btn btn-outline flex-1" onclick="closeQuizModal()">VazgeÃ§</button>
        </div>
      </div>
    </div>
    <!-- Audio Quiz Modal -->
    <div id="audioQuizModal" class="fixed inset-0 bg-black/40 flex items-center justify-center z-50 hidden">
      <div class="bg-white dark:bg-gray-900 p-8 rounded-xl shadow-xl w-full max-w-md animate-in">
        <h3 class="text-xl font-bold mb-4">DinlediÄŸiniz kelimeyi yazÄ±n!</h3>
        <input id="audioQuizAnswer" class="input w-full mb-3" placeholder="CevabÄ±nÄ±zÄ± yazÄ±n..." autocomplete="off">
        <div class="flex gap-2">
          <button class="btn btn-primary flex-1" onclick="submitQuizAudioAnswer()">Cevapla</button>
          <button class="btn btn-outline flex-1" onclick="closeAudioQuizModal()">VazgeÃ§</button>
        </div>
      </div>
    </div>
  </main>
  <!-- Bottom navigation for mobile -->
  <nav class="fixed left-0 right-0 bottom-0 z-40 bg-white/90 dark:bg-gray-800/90 shadow-xl flex justify-around py-2 rounded-t-xl sm:hidden">
    <button onclick="showSection('kelimeEkle')" class="flex flex-col items-center text-blue-500"><span>â•</span><span class="text-xs">Ekle</span></button>
    <button onclick="showSection('kelimeListesi')" class="flex flex-col items-center text-purple-500"><span>ğŸ“–</span><span class="text-xs">Liste</span></button>
    <button onclick="showSection('quiz')" class="flex flex-col items-center text-green-500"><span>ğŸ“</span><span class="text-xs">Quiz</span></button>
    <button onclick="showSection('audioQuiz')" class="flex flex-col items-center text-blue-600"><span>ğŸ”‰</span><span class="text-xs">Sesli</span></button>
    <button onclick="showSection('flashcard')" class="flex flex-col items-center text-yellow-500"><span>ğŸƒ</span><span class="text-xs">Kart</span></button>
    <button onclick="showSection('ayarlar')" class="flex flex-col items-center text-gray-500"><span>âš™ï¸</span><span class="text-xs">Ayar</span></button>
    <button onclick="showSection('profil')" class="flex flex-col items-center text-green-500"><span>ğŸ‘¤</span><span class="text-xs">Profil</span></button>
  </nav>
  <footer class="py-3 text-center text-gray-400 text-sm dark:text-gray-500 mt-10">Â© 2025 Kelimelerim</footer>
  <script src="script.js"></script>
  <script>
    function toggleDarkMode() {
      const html = document.documentElement;
      if (html.classList.contains('dark')) {
        html.classList.remove('dark');
        localStorage.theme = 'light';
        document.getElementById('themeIcon').textContent = 'ğŸŒ™';
      } else {
        html.classList.add('dark');
        localStorage.theme = 'dark';
        document.getElementById('themeIcon').textContent = 'â˜€ï¸';
      }
    }
    function showSection(id) {
      for(const sec of ['profil','kelimeEkle','kelimeListesi','ayarlar','quiz','audioQuiz','flashcard']) {
        const el = document.getElementById(sec);
        if(el) {
          if(sec===id) {
            el.classList.remove('hidden');
            setTimeout(()=>el.classList.add('fade-in'),10);
            if(sec==='profil') renderProfile();
          } else {
            el.classList.add('hidden');
            el.classList.remove('fade-in');
          }
        }
      }
      if(id==="flashcard" && typeof showFlashcardSection==="function") showFlashcardSection();
      if(id==="audioQuiz" && typeof showAudioQuizSection==="function") showAudioQuizSection();
    }

    // Profil fonksiyonu
    function saveProfile() {
      const name = document.getElementById('profileName').value.trim();
      const bio = document.getElementById('profileBio').value.trim();
      const img = localStorage.profileImage || "https://randomuser.me/api/portraits/men/32.jpg";
      localStorage.profileName = name;
      localStorage.profileBio = bio;
      if (localStorage.profileImage) {
        document.getElementById('profileImage').src = localStorage.profileImage;
        document.getElementById('profileImagePreview').src = localStorage.profileImage;
      }
      document.getElementById('toast').textContent = "Profil kaydedildi!";
      document.getElementById('toast').style.opacity = 1;
      setTimeout(() => document.getElementById('toast').style.opacity = 0, 2000);
      renderProfile();
    }
    function renderProfile() {
      document.getElementById('profileName').value = localStorage.profileName || "";
      document.getElementById('profileBio').value = localStorage.profileBio || "";
      document.getElementById('profileImage').src = localStorage.profileImage || "https://randomuser.me/api/portraits/men/32.jpg";
      document.getElementById('profileImagePreview').src = localStorage.profileImage || "https://randomuser.me/api/portraits/men/32.jpg";
      // Ä°statistikler
      let kelimeList = [];
      try {
        kelimeList = JSON.parse(localStorage.kelimeler || '[]');
      } catch(e){}
      document.getElementById('profileStatKelime').textContent = kelimeList.length;
      const ogrenildi = kelimeList.filter(w=>w.ogrenildi).length;
      document.getElementById('profileStatOgrenildi').textContent = ogrenildi;
    }
    function updateProfileImage(e) {
      const file = e.target.files[0];
      if(!file) return;
      const reader = new FileReader();
      reader.onload = function(ev) {
        localStorage.profileImage = ev.target.result;
        document.getElementById('profileImage').src = ev.target.result;
        document.getElementById('profileImagePreview').src = ev.target.result;
      };
      reader.readAsDataURL(file);
    }
    // Ana profil resmi tÄ±klanÄ±nca profil sayfasÄ±na git
    document.addEventListener('DOMContentLoaded', function(){
      document.getElementById('profileImage').onclick = function(){
        showSection('profil');
      };
      renderProfile();
    });

    function openQuizModal(q) {
      document.getElementById('quizQuestion').textContent = q;
      document.getElementById('quizModal').classList.remove('hidden');
      document.getElementById('quizAnswer').value = '';
      setTimeout(() => document.getElementById('quizAnswer').focus(), 150);
    }
    function closeQuizModal() {
      document.getElementById('quizModal').classList.add('hidden');
    }
    function openAudioQuizModal() {
      document.getElementById('audioQuizModal').classList.remove('hidden');
      document.getElementById('audioQuizAnswer').value = '';
      setTimeout(() => document.getElementById('audioQuizAnswer').focus(), 150);
    }
    function closeAudioQuizModal() {
      document.getElementById('audioQuizModal').classList.add('hidden');
    }
  </script>
  <style>
    .card { transition: background 0.2s, box-shadow 0.2s;}
    .fade-in, .animate-in { animation: fadein 0.5s;}
    @keyframes fadein { from{opacity:0;transform:scale(0.98);} to{opacity:1;transform:scale(1);} }
    #toast { transition: opacity 0.4s;}
    #listBadge { transition: transform 0.2s;}
    #listBadge.bounce { transform: scale(1.2);}
  </style>
  <script>
  if ('serviceWorker' in navigator) {
    window.addEventListener('load', function() {
      navigator.serviceWorker.register('/service-worker.js')
      .then(function(reg) {
        console.log('Service worker registered.', reg);
      })
      .catch(function(err) {
        console.error('Service worker registration failed:', err);
        // Ä°sterseniz kullanÄ±cÄ±ya burada uyarÄ± gÃ¶sterebilirsiniz:
        // alert('Uygulama Ã§evrimdÄ±ÅŸÄ± desteÄŸi yÃ¼klenemedi!');
      });
    });
  }
</script>
</body>
</html>
